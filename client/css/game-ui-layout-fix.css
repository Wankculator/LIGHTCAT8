/* Game UI Layout Fix - Rearrange elements for better mobile/desktop experience */

/* Override the game UI container to use grid layout */
#game-ui {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    padding: 15px !important;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;
    align-items: start !important;
    gap: 15px !important;
    z-index: 100 !important;
    pointer-events: none !important;
}

/* Time indicator - keep on left */
#game-ui .game-stats:first-child {
    grid-column: 1 !important;
    justify-self: start !important;
    margin: 0 !important;
}

/* Lightning Collected - move to center with proper sizing */
#game-ui .game-stats:nth-child(2) {
    grid-column: 2 !important;
    justify-self: center !important;
    margin: 0 !important;
    min-width: 180px !important; /* Wider frame for comfortable padding */
    padding: 10px 20px !important; /* More horizontal padding */
    white-space: nowrap !important; /* Prevent text wrapping */
}

/* Empty space for balance (where back button sits) */
#game-ui::after {
    content: '';
    grid-column: 3 !important;
}

/* Ensure back button has EXACT same frame style as other indicators */
#backButton {
    position: fixed !important;
    top: 15px !important; /* Match game-ui padding */
    right: 15px !important; /* Match game-ui padding */
    
    /* Match game-stats frame exactly */
    background: rgba(0, 0, 0, 0.95) !important;
    border: 1.5px solid rgba(255, 215, 0, 0.3) !important;
    border-radius: 12px !important; /* Same as game-stats */
    padding: 8px 16px !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.8) !important;
    
    /* Text styling */
    color: var(--primary-yellow) !important;
    text-decoration: none !important;
    font-size: 0.9rem !important; /* Match other text */
    font-weight: 600 !important;
    text-align: center !important;
    
    /* Layout */
    z-index: 200 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    min-height: 40px !important; /* Match game-stats height */
    min-width: 60px !important;
}

/* Style adjustments for consistent look */
.game-stats {
    background: rgba(0, 0, 0, 0.95) !important;
    border: 1.5px solid rgba(255, 215, 0, 0.3) !important;
    border-radius: 12px !important;
    padding: 8px 16px !important;
    min-width: auto !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.8) !important;
    pointer-events: auto !important;
    height: fit-content !important;
    min-height: 40px !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
    overflow: hidden !important; /* Prevent content from spilling out */
    position: relative !important;
}

/* Ensure h3 headers are properly styled inside frames */
.game-stats h3 {
    margin: 0 0 4px 0 !important;
    font-size: 0.75rem !important;
    color: rgba(255, 215, 0, 0.8) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-weight: normal !important;
    line-height: 1 !important;
    white-space: nowrap !important;
}

/* Ensure content stays inside frame */
.game-stats .timer,
.game-stats .score {
    margin: 0 !important;
    line-height: 1 !important;
}

/* Specific fix for Lightning Collected frame */
#game-ui .game-stats:nth-child(2) h3 {
    font-size: 0.65rem !important; /* Smaller text for better fit */
    letter-spacing: 0 !important; /* No letter spacing to save space */
    margin-bottom: 6px !important; /* Proper spacing from score */
    padding: 0 5px !important; /* Small internal padding */
}

/* Ensure the score display fits properly */
.game-stats .score {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 5px !important;
    white-space: nowrap !important;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    #game-ui {
        padding: 10px !important;
        gap: 10px !important;
        grid-template-columns: minmax(0, 1fr) auto minmax(0, 1fr) !important;
    }
    
    /* Compact stats on mobile */
    .game-stats {
        padding: 6px 12px !important;
        min-height: 36px !important;
    }
    
    .game-stats h3 {
        font-size: 0.65rem !important;
        margin-bottom: 2px !important;
    }
    
    /* Adjust back button to match */
    #backButton {
        top: 10px !important;
        right: 10px !important;
        padding: 6px 12px !important;
        min-height: 36px !important;
    }
    
    #backButton span:first-child {
        font-size: 0.65rem !important;
        margin-bottom: 2px !important;
    }
    
    #backButton span:last-child {
        font-size: 1rem !important;
    }
    
    /* Lightning collected - optimize for center on mobile */
    #game-ui .game-stats:nth-child(2) {
        min-width: 140px !important; /* Adequate width on mobile */
        padding: 8px 15px !important; /* Good padding that doesn't touch edges */
    }
    
    #game-ui .game-stats:nth-child(2) h3 {
        font-size: 0.55rem !important; /* Small but readable */
        letter-spacing: -0.5px !important; /* Slight negative spacing to compress */
        margin-bottom: 4px !important;
    }
    
    /* Ensure timer stays visible */
    #game-ui .game-stats:first-child {
        min-width: 60px !important;
    }
}

/* Small mobile devices */
@media (max-width: 375px) {
    #game-ui {
        padding: 8px !important;
        gap: 5px !important;
    }
    
    .game-stats {
        padding: 5px 8px !important;
        min-height: 32px !important;
    }
    
    .game-stats h3 {
        font-size: 0.6rem !important;
        margin-bottom: 1px !important;
    }
    
    .timer {
        font-size: 1rem !important;
    }
    
    .score {
        font-size: 0.9rem !important;
    }
    
    .lightning-icon {
        width: 14px !important;
        height: 14px !important;
    }
    
    #backButton {
        top: 8px !important;
        right: 8px !important;
        padding: 5px 10px !important;
        font-size: 0.7rem !important;
        min-height: 32px !important;
    }
}

/* Tablet adjustments */
@media (min-width: 768px) and (max-width: 1024px) {
    #game-ui {
        padding: 20px !important;
        gap: 20px !important;
    }
    
    .game-stats {
        padding: 10px 20px !important;
        min-height: 45px !important;
    }
    
    #backButton {
        top: 20px !important;
        right: 20px !important;
        padding: 10px 20px !important;
        font-size: 0.9rem !important;
        min-height: 45px !important;
    }
}

/* Landscape orientation - keep UI compact */
@media (max-width: 1024px) and (orientation: landscape) {
    #game-ui {
        padding: 8px 15px !important;
        gap: 15px !important;
    }
    
    .game-stats {
        padding: 5px 12px !important;
        min-height: 32px !important;
    }
    
    .game-stats h3 {
        font-size: 0.6rem !important;
    }
    
    #backButton {
        top: 8px !important;
        right: 15px !important;
        padding: 5px 12px !important;
        min-height: 32px !important;
    }
}

/* Tier notification positioning adjustment */
.tier-notification {
    position: absolute !important;
    top: 180px !important; /* Moved lower to ensure clear separation from lightning indicator */
    left: 50% !important;
    transform: translateX(-50%) !important;
}

/* Hide the navigation container since we're positioning back button directly */
body > div[style*="position: fixed"][style*="top: 10px"][style*="right: 10px"] {
    display: none !important;
}

/* Ensure back button is always visible when game is active */
#game-container:has(#game-ui[style*="display: block"]) #backButton,
#game-container:has(#game-ui:not([style*="display: none"])) #backButton {
    display: flex !important;
}

/* Debug helper */
.ui-debug #game-ui {
    background: rgba(255, 0, 0, 0.1) !important;
}

.ui-debug .game-stats {
    border-color: red !important;
}

.ui-debug #backButton {
    border-color: lime !important;
}